<div [ngBusy]="{busy:[fetchingResults],message:'Loading imaging............'}"></div>
<div>
  <h4 class="component-title"><span class="icon-i-radiology"></span>Imaging Summary</h4>
  <div>
    <div class="table-responsive">
      <table class="table table-striped ">
        <thead>
        <tr>
          <th>Study Date</th>
          <th>Modality</th>
          <th >Report</th>
          <th>Image</th>
          <th>Comments</th>
        </tr>
        </thead>
        <tbody *ngIf="imagingResults">
        <tr *ngFor="let order of imagingResults  ">
          <td>
            {{order?.effectiveDateTime |date:'dd-MM-yyyy' }}
          </td>
          <td>
            {{order.code?.text}}
          </td>
          <td>
            {{order.report[0]}}<br> {{order.report[1]}} <br> {{order.report[2]}}
          </td>
          <td>
            <button (click)="fetchImageFromRefpacs()" class="btn default"
                    [style.display]="(result.resourceType === 'OperationOutcome') ? 'none' : '' "
                    style="background-color: white;border-width: 1px; border-color: gray">
              <span class="fa fa-camera" aria-hidden="true"></span>
            </button>
          </td>
          <td>
            <i><span (click)="likeImage(order)" data-toggle="tooltip" title="Like image"
                     [style.display]="(result.resourceType === 'OperationOutcome') ? 'none' : '' "
                     class="fa fa-thumbs-up" aria-hidden="true" style="font-size: 35px; cursor: pointer"></span></i>
            <span (click)="disLikeImage(order)" data-toggle="tooltip" title="Dislike image"
                  [style.display]="(result.resourceType === 'OperationOutcome') ? 'none' : '' "
                  class="fa fa-thumbs-down" aria-hidden="true" style="font-size: 35px;cursor: pointer"></span>
          </td>
        </tr>
        </tbody>
      </table>

    </div>
    <div>
    </div>

  </div>

  <div class="modal fade" bsModal #staticModal="bs-modal" [config]="{backdrop: 'static'}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title pull-left">Radiology Image</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="staticModal.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" *ngIf="imageToShow">
          <img [src]="imageToShow" class="img-responsive">

        </div>
      </div>
    </div>
  </div>


  <p-dialog header="Comments" [(visible)]="display" styleClass="comments-dialog">
    <div>
    <form>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
          <div class="alert alert-success" *ngIf="showSuccessAlert" style="margin-top:10px">
            <strong>Done!</strong> {{successAlert}}
          </div>
          <div class="alert alert-danger" *ngIf="showErrorAlert" style="margin-top:10px">
            <strong>{{errorTitle}}</strong> {{errorAlert}}
          </div>
        </div>
      </div>

      <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <textarea class="form-control textarea" rows="3" [(ngModel)]="message" name="Message" id="Message" placeholder="Message"></textarea>
        </div>
      </div>
    </div>


    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
      <button class="btn btn-primary" type="button" (click)="createRadiologyComment()"><span>Save</span></button>
      <button class="btn btn-danger pull-right" type="button" (click)="dismissDialog()">
        <span>Cancel</span></button>

    </div>
    </div>
    </form>
    </div>
  </p-dialog>
</div>
