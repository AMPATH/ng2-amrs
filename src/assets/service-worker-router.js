/*!
 * service-worker-router v1.7.2 by berstend
 * https://github.com/berstend/service-worker-router#readme
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ServiceWorkerRouter={})}(this,function(e){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r,n=(function(e,r){var n,a,o=[].slice;n=t,a=function(){var e,t,r,n,a,i,u,s,l,c,h,f,d,p,g;return l=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},u=function(e,t){var r,n,a;for(a=[],r=-1,n=e.length;++r<n;)a=a.concat(t(e[r]));return a},p=function(e,t){var r,n,a;for(a="",r=-1,n=e.length;++r<n;)a+=t(e[r]);return a},d=function(e){return new RegExp(e.toString()+"|").exec("").length-1},h=function(e,t){var r,n,a,o,i;for(o={},r=-1,a=e.length;++r<a;)n=e[r],null!=(i=t[r])&&(null!=o[n]?(Array.isArray(o[n])||(o[n]=[o[n]]),o[n].push(i)):o[n]=i);return o},(e={}).Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,r){return function(n){var a,o;if(null!=(a=r(n)))return o=new e.Tagged(t,a.value),new e.Result(o,a.rest)}},e.regex=function(t){return function(r){var n,a;if(null!=(n=t.exec(r)))return a=n[0],new e.Result(a,r.slice(a.length))}},e.sequence=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],function(r){var n,a,o,i,u;for(n=-1,a=t.length,u=[],o=r;++n<a;){if(null==(i=(0,t[n])(o)))return;u.push(i.value),o=i.rest}return new e.Result(u,o)}},e.pick=function(){var t,r;return t=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],function(n){var a,o;if(null!=(o=e.sequence.apply(e,r)(n)))return a=o.value,o.value=a[t],o}},e.string=function(t){var r;return r=t.length,function(n){if(n.slice(0,r)===t)return new e.Result(t,n.slice(r))}},e.lazy=function(e){var t;return t=null,function(r){return null==t&&(t=e()),t(r)}},e.baseMany=function(t,r,n,a,o){var i,u,s;for(u=o,s=n?"":[];(null==r||null==r(u))&&null!=(i=t(u));)n?s+=i.value:s.push(i.value),u=i.rest;if(!a||0!==s.length)return new e.Result(s,u)},e.many1=function(t){return function(r){return e.baseMany(t,null,!1,!0,r)}},e.concatMany1Till=function(t,r){return function(n){return e.baseMany(t,r,!0,!0,n)}},e.firstChoice=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],function(t){var r,n,a;for(r=-1,n=e.length;++r<n;)if(null!=(a=(0,e[r])(t)))return a}},f=function(t){var r;return(r={}).wildcard=e.tag("wildcard",e.string(t.wildcardChar)),r.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy(function(){return r.pattern}),e.string(t.optionalSegmentEndChar))),r.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),r.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy(function(){return r.name}))),r.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),r.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy(function(){return r.escapedChar}),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),r.wildcard))),r.token=e.lazy(function(){return e.firstChoice(r.wildcard,r.optional,r.named,r.static)}),r.pattern=e.many1(e.lazy(function(){return r.token})),r},s={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},i=function(e,t){if(Array.isArray(e))return p(e,function(e){return i(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return l(e.value);case"optional":return"(?:"+i(e.value,t)+")?"}},a=function(e,t){return null==t&&(t=s.segmentValueCharset),"^"+i(e,t)+"$"},n=function(e){if(Array.isArray(e))return u(e,n);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return n(e.value)}},c=function(e,t,r,n){var a,o,i;if(null==n&&(n=!1),null!=(i=e[t])){if(!((a=r[t]||0)>(Array.isArray(i)?i.length-1:0)))return o=Array.isArray(i)?i[a]:i,n&&(r[t]=a+1),o;if(n)throw new Error("too few values provided for key `"+t+"`")}else if(n)throw new Error("no values provided for key `"+t+"`")},r=function(e,t,n){var a,o;if(Array.isArray(e)){for(a=-1,o=e.length;++a<o;)if(r(e[a],t,n))return!0;return!1}switch(e.tag){case"wildcard":return null!=c(t,"_",n,!1);case"named":return null!=c(t,e.value,n,!1);case"static":return!1;case"optional":return r(e.value,t,n)}},g=function(e,t,n){if(Array.isArray(e))return p(e,function(e){return g(e,t,n)});switch(e.tag){case"wildcard":return c(t,"_",n,!0);case"named":return c(t,e.value,n,!0);case"static":return e.value;case"optional":return r(e.value,t,n)?g(e.value,t,n):""}},(t=function(e,r){var o,i,u;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=r){if(!Array.isArray(r))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(o=d(this.regex),r.length!==o)throw new Error("regex contains "+o+" groups but array of group names contains "+r.length);this.names=r}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(i={escapeChar:(null!=r?r.escapeChar:void 0)||s.escapeChar,segmentNameStartChar:(null!=r?r.segmentNameStartChar:void 0)||s.segmentNameStartChar,segmentNameCharset:(null!=r?r.segmentNameCharset:void 0)||s.segmentNameCharset,segmentValueCharset:(null!=r?r.segmentValueCharset:void 0)||s.segmentValueCharset,optionalSegmentStartChar:(null!=r?r.optionalSegmentStartChar:void 0)||s.optionalSegmentStartChar,optionalSegmentEndChar:(null!=r?r.optionalSegmentEndChar:void 0)||s.optionalSegmentEndChar,wildcardChar:(null!=r?r.wildcardChar:void 0)||s.wildcardChar},null==(u=f(i).pattern(e)))throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(a(this.ast,i.segmentValueCharset)),this.names=n(this.ast)}}).prototype.match=function(e){var t,r;return null==(r=this.regex.exec(e))?null:(t=r.slice(1),this.names?h(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return g(this.ast,e,{})},t.escapeForRegex=l,t.concatMap=u,t.stringConcatMap=p,t.regexGroupCount=d,t.keysAndValuesToObject=h,t.P=e,t.newParser=f,t.defaultOptions=s,t.astNodeToRegexString=a,t.astNodeToNames=n,t.getParam=c,t.astNodeContainsSegmentsForProvidedParams=r,t.stringify=g,t},null!==r?e.exports=a():n.UrlPattern=a()}(r={exports:{}},r.exports),r.exports);const a=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};var o={segmentNameCharset:"a-zA-Z0-9_-",segmentValueCharset:"a-zA-Z0-9@.+-_"},i=function(){function e(){this.routes=[]}return e.prototype.all=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:""}))},e.prototype.get=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"GET"}))},e.prototype.post=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"POST"}))},e.prototype.put=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"PUT"}))},e.prototype.patch=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"PATCH"}))},e.prototype.delete=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"DELETE"}))},e.prototype.head=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"HEAD"}))},e.prototype.options=function(e,t,r){return void 0===r&&(r={}),this.addRoute(e,t,a({},r,{method:"OPTIONS"}))},e.prototype.addRoute=function(e,t,r){return void 0===r&&(r={}),e instanceof n||(e=new n(e,o)),this.routes.push({pattern:e,handler:t,options:r}),this},e.prototype.match=function(e,t){e instanceof URL||(e=e.startsWith("/")?new URL("http://domain"+e):new URL(e));for(var r=0,n=this.routes;r<n.length;r++){var a=n[r],o=a.pattern,i=a.options,u=a.handler;if(!i.method||i.method===t){var s=o.match(i.matchUrl?e.href:e.pathname);if(s)return{params:s,handler:u,url:e,method:t,route:a}}}return null},e.prototype.matchRequest=function(e){return this.match(e.url,e.method)},e.prototype.matchEvent=function(e){return this.matchRequest(e.request)},e.prototype.handle=function(e,t){var r=this.match(e,t);if(!r)return null;var n=a({},r);return{handlerPromise:r.handler(n),match:n}},e.prototype.handleRequest=function(e){var t=this.matchRequest(e);if(!t)return null;var r=a({},t,{request:e});return{handlerPromise:t.handler(r),match:r}},e.prototype.handleEvent=function(e){var t=e.request,r=this.matchRequest(t);if(!r)return null;var n=a({},r,{request:t,event:e}),o=r.handler(n);return e.respondWith(o),{handlerPromise:o,match:n}},e.prototype.clear=function(){this.routes.length=0},e}();e.UrlPattern=n,e.Router=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=router.min.js.map